files:
  "/etc/nginx/conf.d/https_redirect.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      server {
          listen 80;
          
          # Add a location block to serve the health check without redirecting
          location /health/ {
              return 200;
          }

          # For all other requests, redirect to HTTPS
          location / {
              return 301 https://$host$request_uri;
          }
      }
